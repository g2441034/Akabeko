templates/index.html の中身
見た目を整えるためのHTMLファイルです。これを templates フォルダの中に保存してください。　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　<!DOCTYPE html>
<html>
<head>
    <title>GroupFlow - 貢献度可視化</title>
    <style>
        body { font-family: sans-serif; margin: 40px; background: #f4f7f6; }
        .container { max-width: 600px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .bar { background: #4caf50; height: 25px; margin-bottom: 10px; border-radius: 5px; transition: width 0.5s; color: white; padding-left: 10px; line-height: 25px; font-size: 12px; }
        input, button { padding: 10px; margin: 5px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h2>GroupFlow 貢献度スコア</h2>
        <div id="chart"></div>
        <hr>
        <h3>作業を記録する</h3>
        <input type="text" id="name" placeholder="名前">
        <input type="number" id="points" placeholder="ポイント（例: 10）">
        <button onclick="addData()">登録</button>
    </div>

    <script>
        async function loadChart() {
            const res = await fetch('/api/contributions');
            const data = await res.json();
            const chart = document.getElementById('chart');
            chart.innerHTML = '';
            data.forEach(user => {
                const row = document.createElement('div');
                row.innerHTML = `<strong>${user.name}</strong>`;
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.width = (user.score * 5) + 'px'; // スコアを幅に反映
                bar.innerText = user.score + ' pts';
                chart.appendChild(row);
                chart.appendChild(bar);
            });
        }

        async function addData() {
            const name = document.getElementById('name').value;
            const points = document.getElementById('points').value;
            await fetch('/api/add', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({name, points})
            });
            loadChart(); // グラフを更新
        }
        loadChart(); // 最初に読み込む
    </script>
</body>
</html>